# validateAllState.ts 기술 보고서

## 1. 파일 개요

`validateAllState.ts`는 저장 전 전체 상태값을 검증하여, 입력값의 누락·오류·범위 초과 등 예외 상황을 사전에 탐지하고, 에러 메시지를 반환하는 유틸리티 함수입니다. 전략, 자산, 모멘텀, 재진입 등 모든 도메인별 상태를 한 번에 검증할 수 있습니다.

## 2. 주요 함수 및 역할

### 2.1. validateAllState(allState)
- 입력받은 전체 상태(allState)를 도메인별로 검증
- 각 필드별로 누락, 타입 오류, 범위 초과 등 다양한 예외 상황을 체크
- 에러 발생 시, 에러 메시지를 배열로 반환
- 모든 검증을 통과하면 valid: true, 에러가 있으면 valid: false

## 3. 검증 로직 상세

- 전략: 이름, 알고리즘, 투자금, 리밸런싱 주기, 밴드 리밸런싱, 시작/종료일 등 필수값 및 범위 체크
- 자산: 최소 1개 이상, 각 자산의 종류/자산군/비중(0~100) 체크
- 모멘텀: 인덱스, 기준선, 이동평균, 기간(1~20, 10~60), 진입/청산 가중치(1~5) 등 체크
- 재진입: 방법, 기간, 매수/매도 이격도 등 필수값 체크
- 시작일/종료일: 종료일이 시작일보다 빠르면 에러

## 4. 구조적 장점

- 도메인별로 세분화된 검증 로직으로, 실무적 오류를 사전에 방지
- 에러 메시지 배열 반환으로, UI에서 상세한 피드백 제공 가능
- 확장성: 새로운 도메인이나 필드 추가 시 쉽게 검증 로직 확장 가능
- 코드 일원화: 모든 상태 검증을 한 곳에서 처리하여 유지보수 용이

## 5. 결론

`validateAllState.ts`는 저장 전 전체 상태값의 유효성을 일괄적으로 검증하여, 실무에서 자주 발생하는 입력 오류와 누락을 효과적으로 방지합니다. 에러 메시지 반환 구조로 사용자에게 명확한 피드백을 제공하며, 확장성과 유지보수성이 뛰어난 유틸리티입니다.
또한, 반환된 에러 메시지 배열을 Dialog(모달) 컴포넌트와 연동하여 사용자에게 직관적으로 안내할 수 있어, UX 측면에서도 매우 효과적입니다.

